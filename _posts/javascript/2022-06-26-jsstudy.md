---
layout: single
title:  "실행 컨텍스트(1)"
permalink: /category/javascript11/
categories: javascript
published: true
---


# 스택(stack)과 큐(queue)

## 스택(stack)
출입구가 하나뿐인 깊은 우물 같은 데이터 구조  
비어있는 스택에 a,b,c,d 를 저장 했다면, 꺼낼 때는 반대로 d,c,b,a 의 순서로 꺼낼수 밖에 없다.

>스택오버플로우  
지정한 스택 메모리 사이즈보다 더 많은 스택 메모리를 사용하게 되어 에러가 발생하는 상황을 일컫는다.  
여기서 말하는 스택오버플로우의 스택이 그 스택이다.
데이터를 100개만 저장할 수 있는 우물에 100개 이상의 데이터를 넣을려고 할 떄 넘치는 상황

## 큐(queue)

양쪽이 모두 열려있는 파이프의 구조  
종류에 따라 양쪽 모두 입력과 출력이 가능한 큐도 있지만 보통 한쪽은 입력만, 다른 한쪽은 출력만을 담당하는 구조를 말한다.  
보통의 경우에도 비어있는 큐에 순서대로 데이터 a,b,c,d를 저장했다면 꺼낼때 역시 a,b,c,d의 순서대로 꺼낼 수 밖에 없다.

![](https://ifh.cc/g/3gQxQS.png)

ppt로 그려본 스택과 큐의 모양.
잘그렸는데?

# 실행 컨텍스트

실행컨텍스트는 <b>실행할 코드에 제공할 환경 정보들을 모아놓은 객체</b>라고 한다.  
동일한 환경에 있는 코드들을 실행할 때, 필요한 환경 정보들을 모아 컨텍스트를 구성하고, 이를 콜 스택에 쌓아 올렸다가, 가장 위에 쌓여있는 컨텍스트와 관련 있는 코드들을 하나씩 실행하는 식으로 진행된다.  
여기서 동일한 환경이란 하나의 컨텍스트를 구성할 수 있는 방법으로 전역공간, eval()함수, 함수 등이 있다.  
자동으로 생성되는 전역공간과 eval을 제외하면 우리가 흔히 실행 컨텍스트를 구성하는 방법은 함수를 실행하는 것 뿐이다.

## 예제 1

```js
//----------------(1)
var a = 1;
function outer(){
  function enner(){
    console.log(a);
    var a = 3;
  }
  inner(); //----------(2)
  console.log(a);
}
outer(); //---------(3)
console.log(a);
```

## 실행 컨텍스트와 콜 스텍
![](https://ifh.cc/g/8qSkcF.png)

### 설명

예제1과 같이 처음 js를 실행하는 순간 전역컨텍스트가 콜 스텍에 담긴다.

> 전역컨텍스트  
전역 컨텍스트는 실행 컨텍스트와 큰 차이점이 없다. 최상단의 공간은 코드 내부에서 별도의 실행 명령이 없어도 브라우저에서 자동으로 실행하기 때문에 <mark>자바스크립트 파일이 열리는 순간 전역 컨텍스트가 활성화 된다고 이해하자</mark>

콜 스텍에는 전역 컨텍스트 외에 다른것이 없으므로 전역 컨텍스트와 관련된 코드들을 순차로 진행하다가 (3)에서 outer함수를 호출하면 js는 outer함수에 대한 실행컨텍스트를 만든 후 콜 스텍에 담는다.  

콜 스텍 맨 위에 outer함수가 놓인 상태가 됐으므로 outer함수의 내부코드를 순차적으로 실행한다.

다시 (2)에서 inner함수의 실행컨텍스트가 콜 스택 맨 뒤에 배치되었으므로 outer 컨텍스트와 관련된 코드실행을 중단하고 inner함수 함수의 코드를 순서대로 진행하게 되는것이다.

스택구조를 생각해보면 한 실행 컨텍스트가 콜 스택 맨 위에 쌓이는 순간 곧 현재 실행할 코드에 관여하게 되는 시점이 되는것이다.
> 한 실행 컨텍스트가 콜 스택 맨위에 쌓이면 이 전에 실행되던 실행컨텍스트는 코드실행이 중단되고, 콜 스택 위에 올라온 실행 컨텍스트가 다시 실행이 되는것이다.


## 결론

이렇게 어떤 실행 컨텍스트가 활성화 될 때 js 엔진은 해당 컨텍스트에 관련된 코드들을 실행하는 데 필요한 정보를 수집해서 실행 컨텍스트 객체에 저장한다. 이러한 객체는 개발자가 코드를 통해 확인할 수 는 없음!( 자바스크립트 엔진이 활용할 목적으로 생성할 뿐이라고 한다)


# TO BE CONTINUE.....